{{/*
  layouts/partials/home/news.html
  ─────────────────────────────────────────────────────────────────────────────
  Latest news/blog posts section with scroll reveal.
  Shows the 3 most recent posts. Hidden if no posts exist.
  ─────────────────────────────────────────────────────────────────────────────
*/}}

{{- $posts  := where .Site.RegularPages "Section" "posts" -}}
{{- $recent := first 3 $posts -}}

{{- with $recent -}}
<section class="news-section" aria-labelledby="news-heading">
  <div class="container">
    <div class="text-center reveal">
      <span class="section-accent section-accent--center"></span>
      <h2 class="section-heading section-heading--center" id="news-heading">Latest News</h2>
    </div>
    <div class="news-grid">
      {{- range $i, $post := . -}}
      <article class="news-card reveal reveal--d{{ add $i 1 }}">
        <p class="news-card__date">
          <time datetime="{{ $post.Date.Format "2006-01-02" }}">
            {{- $post.Date.Format "January 2, 2006" -}}
          </time>
        </p>
        <h3 class="news-card__title">
          <a href="{{ $post.RelPermalink }}">{{ $post.Title }}</a>
        </h3>
        {{- with $post.Description -}}
          <p class="news-card__excerpt">{{ . }}</p>
        {{- else -}}
          {{- with $post.Summary -}}
            <p class="news-card__excerpt">{{ . }}</p>
          {{- end -}}
        {{- end -}}
      </article>
      {{- end -}}
    </div>
    <div class="news-cta reveal">
      <a href="/posts/" class="btn btn--outline">All Updates</a>
    </div>
  </div>
</section>
{{- end -}}
